{"version":3,"sources":["utils.tsx","LinkSections.tsx","config.ts","auth.ts","SearchBar.tsx","Clock.tsx","StaticLinks.tsx","HomeSearch.tsx","App.tsx","serviceWorkerRegistration.ts","index.tsx"],"names":["getValidURL","link","test","ls","window","localStorage","useCached","key","defaultValue","useState","cached","getItem","JSON","parse","data","setData","useEffect","setItem","stringify","parseQueryString","queryString","location","search","values","qs","qmarkKey","Object","keys","find","elt","startsWith","tmp","slice","useQueryString","initialValue","getQueryStringValue","value","setValue","useCallback","newValue","parsed","newurl","protocol","host","pathname","length","history","pushState","path","setQueryString","styled","i","attrs","props","className","checked","useLogin","create","set","loggedIn","setLoggedIn","val","useAddTask","addTask","setAddTask","a","SectionContainer","div","LinksWrapper","Section","title","children","id","Link","LinkSections","query","setAction","sites","setSites","sections","setSections","selected","setSelected","totalMatched","setTotalMatched","fetch","then","res","json","catch","err","console","error","document","documentElement","style","setProperty","Math","max","map","category","updateSections","newSelected","newSections","pos","matches","forEach","idx","links","filtered","filter","name","toLowerCase","includes","push","isSelected","href","isURL","match","onKeyDown","e","addEventListener","removeEventListener","TASKS_DISCOVERY_DOCS","TASKS_SCOPE","called","useGoogleAPI","clientInit","setClientInit","offlineAccess","setOfflineAccess","gapi","load","updateLoggedInStatus","status","setTimeout","auth2","getAuthInstance","currentUser","get","grantOfflineAccess","scope","prompt","code","client","init","apiKey","clientId","discoveryDocs","isSignedIn","listen","authInstance","signIn","signOut","logIn","logOut","username","getBasicProfile","getGivenName","SearchInput","input","SearchDatePicker","DayPicker","open","SearchBar","text","setText","action","useRef","pickerOpen","setPickerOpen","taskText","setTaskText","updateTitle","start","blurCallback","bind","focusCallback","onSubmit","preventDefault","trim","clear","assign","encodeURIComponent","type","ref","autoFocus","autoComplete","onChange","target","selectedDays","Date","onDayClick","d","due","toISOString","Wrapper","DateSpan","span","TimeSpan","Clock","date","setDate","timer","setInterval","clearInterval","dayjs","format","StaticLinksContainer","StaticLink","StaticLinks","MainContainer","HomeSearch","setQuery","useResizeDetector","height","undefined","parseInt","getComputedStyle","getPropertyValue","App","min","floor","random","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.53dc19b4.chunk.js","sourcesContent":["import {\n  Dispatch,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport qs from 'querystring';\nimport create from 'zustand';\nimport { Task } from './config';\nimport styled from 'styled-components';\n\ntype Arr = readonly unknown[];\nexport function partial<T extends Arr, U extends Arr, R>(\n  f: (...args: [...T, ...U]) => R,\n  ...headArgs: T\n) {\n  return (...tailArgs: U) => f(...headArgs, ...tailArgs);\n}\n\nexport function getValidURL(link: string): string {\n  return /^https?:\\/\\//.test(link) ? link : `//${link}`;\n}\n\nconst ls = window.localStorage;\n\nexport function useCached<T>(\n  key: string,\n  defaultValue: T,\n): [T, Dispatch<SetStateAction<T>>] {\n  const [data, setData] = useState<T>(() => {\n    const cached = ls.getItem(key);\n    return cached !== null ? JSON.parse(cached) : defaultValue;\n  });\n\n  useEffect(() => {\n    ls.setItem(key, JSON.stringify(data));\n  }, [data, key]);\n\n  return [data, setData];\n}\n\nfunction parseQueryString(queryString = window.location.search) {\n  const values = qs.parse(queryString);\n\n  // Remove leading qmark from first query param\n  const qmarkKey = Object.keys(values).find((elt) => elt.startsWith('?'));\n  if (qmarkKey) {\n    const tmp = values[qmarkKey];\n    delete values[qmarkKey];\n    values[qmarkKey.slice(1)] = tmp;\n  }\n  return values;\n}\n\nfunction setQueryString(key: string, value: any) {\n  const parsed = parseQueryString();\n  if (key in parsed && !value) delete parsed[key];\n  else parsed[key] = value;\n\n  const newurl =\n    window.location.protocol +\n    '//' +\n    window.location.host +\n    window.location.pathname +\n    `${Object.keys(parsed).length ? '?' : ''}${qs.stringify(parsed)}`;\n\n  window.history.pushState({ path: newurl }, '', newurl);\n}\n\nfunction getQueryStringValue(key: string) {\n  return parseQueryString()[key];\n}\n\nexport function useQueryString(key: string, initialValue: any) {\n  const [value, setValue] = useState(getQueryStringValue(key) || initialValue);\n  const onSetValue = useCallback(\n    (newValue) => {\n      setValue(newValue);\n      setQueryString(key, newValue);\n    },\n    [key],\n  );\n\n  return [value, onSetValue];\n}\n\ntype CheckboxProps = { checked: boolean };\n\nexport const Checkbox = styled.i.attrs<CheckboxProps>((props) => ({\n  className: props.checked ? 'fas fa-check-square' : 'fas fa-square',\n}))<CheckboxProps>`\n  margin: 12px 10px 0px 15px;\n\n  transform: scale(1.35);\n\n  color: var(--frg-l);\n\n  &:hover {\n    color: var(--frg-ll);\n  }\n`;\n\nexport const TrashIcon = styled.i.attrs({ className: 'far fa-trash-alt fa-lg' })`\n  padding: 13px 10px;\n\n  color: var(--frg-l);\n\n  &:hover {\n    color: var(--frg-ll);\n  }\n`;\n\n// Context stuff\n\nexport const useLogin = create<{\n  loggedIn: boolean;\n  setLoggedIn: (val: boolean) => void;\n}>((set) => ({\n  loggedIn: false,\n  setLoggedIn: (val) => set({ loggedIn: val }),\n}));\n\ntype AddTask = (t: Task) => void;\nexport const useAddTask = create<{\n  addTask: AddTask;\n  setAddTask: (a: AddTask) => void;\n}>((set) => ({\n  addTask: () => {},\n  setAddTask: (a) => set({ addTask: a }),\n}));\n","import { useCallback, useEffect, useState } from 'react';\nimport isURL from 'validator/lib/isURL';\nimport { Sites, option, SITES_DATA_URL } from './config';\nimport { getValidURL, useCached } from './utils';\nimport styled from 'styled-components';\n\nconst SectionContainer = styled.div`\n  vertical-align: top;\n\n  display: inline-block;\n\n  overflow: hidden;\n\n  box-sizing: border-box;\n  margin: 2px;\n  height: var(--section-height);\n  width: var(--section-width);\n\n  background-color: var(--hdr);\n\n  text-align: left;\n  color: var(--htx);\n\n  &:before {\n    content: '';\n    margin-left: 5px;\n  }\n`;\n\nconst LinksWrapper = styled.div`\n  padding: 10px 15px 15px 10px;\n\n  height: 100%;\n\n  background-color: var(--frg);\n`;\n\nfunction Section({\n  title,\n  children,\n}: {\n  title: string;\n  children: JSX.Element[];\n}) {\n  return children.length ? (\n    <SectionContainer id={title}>\n      {title}\n      <LinksWrapper>{children}</LinksWrapper>\n    </SectionContainer>\n  ) : (\n    <></>\n  );\n}\n\nconst Link = styled.a`\n  margin-bottom: var(--link-margin);\n  padding-left: 5px;\n\n  display: block;\n\n  color: var(--txt);\n  text-decoration: none;\n\n  &:hover,\n  &.selected {\n    background-color: rgba(255, 255, 255, 0.05);\n\n    color: var(--hgl);\n  }\n`;\n\nexport default function LinkSections({\n  query,\n  setAction,\n}: {\n  query: string;\n  setAction: (s: option<string>) => void;\n}) {\n  const [sites, setSites] = useCached<option<Sites>>('sites', null);\n  const [sections, setSections] = useState<JSX.Element[]>([]);\n  const [selected, setSelected] = useState<option<number>>(null);\n  const [totalMatched, setTotalMatched] = useState(0);\n\n  useEffect(() => {\n    fetch(SITES_DATA_URL)\n      .then((res) => res.json())\n      .then((data) => setSites(data))\n      .catch((err) => console.error(err));\n  }, [setSites]);\n\n  useEffect(() => {\n    if (sites !== null)\n      document.documentElement.style.setProperty(\n        '--max-links',\n        `${Math.max(\n          ...Object.keys(sites).map(\n            (category) => Object.keys(sites[category]).length,\n          ),\n        )}`,\n      );\n  }, [sites]);\n\n  const updateSections = useCallback(\n    function (newSelected: option<number>) {\n      if (sites === null) return;\n\n      const newSections: JSX.Element[] = [];\n      let pos = 0,\n        matches = false;\n      Object.keys(sites).forEach((category, idx) => {\n        const links = sites[category];\n        const filtered = Object.keys(links).filter((name) =>\n          name.toLowerCase().includes(query),\n        );\n\n        if (filtered.length) {\n          matches = true;\n          newSections.push(\n            <Section key={idx} title={category}>\n              {filtered.map((name, idx) => {\n                const isSelected = pos++ === newSelected;\n                if (isSelected) setAction(links[name]);\n\n                return (\n                  <Link\n                    key={idx}\n                    href={getValidURL(links[name])}\n                    className={isSelected ? 'selected' : ''}\n                  >\n                    {name}\n                  </Link>\n                );\n              })}\n            </Section>,\n          );\n        }\n      });\n      setTotalMatched(pos);\n      setSections(newSections);\n      setSelected(newSelected);\n      if (!matches || !query.length) setAction(null);\n    },\n    [query, sites, setAction],\n  );\n\n  useEffect(() => {\n    if (\n      isURL(query) ||\n      /^(https?)?:\\/\\/localhost:\\d{1,5}([^\\d].*)?$/g.test(query)\n    ) {\n      setAction(query);\n      return;\n    }\n    if (\n      query.match(/^lh\\d{3,5}$/) !== null ||\n      query.match(/^localhost:\\d{3,5}$/) !== null\n    ) {\n      setAction(\n        `http://localhost:${(query.match(/\\d{3,5}/) as RegExpMatchArray)[0]}`,\n      );\n      return;\n    }\n    // Assemble list of sections based on query\n    updateSections(query.length ? 0 : null);\n  }, [query, setAction, updateSections]);\n\n  useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      let newSelected = selected;\n      if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {\n        if (selected !== null && selected > 0) newSelected = selected - 1;\n      } else if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {\n        if (selected !== null && selected < totalMatched)\n          newSelected = selected + 1;\n      }\n      if (newSelected !== selected) updateSections(newSelected);\n    }\n    document.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [selected, totalMatched, updateSections]);\n\n  return <div id=\"links\">{sections}</div>;\n}\n","export const PAGE_HUE_MIN = 10;\nexport const PAGE_HUE_MAX = 360;\n\nexport const DEFAULT_TAB_TITLE = '🏠 Home';\nexport const SEARCH_TAB_PREFIX = '🔍';\nexport const NOTE_TAB_PREFIX = '📝';\n\nexport const DEFAULT_SEARCH_URL = 'https://google.com/search';\n\nexport const SITES_DATA_URL =\n  'https://gist.githubusercontent.com/minchingtonak/97724dbb14bb9321993592b7ead908ad/raw';\n\nexport const TASK_UPDATE_DELAY = 500; // ms\n\nexport type option<T> = T | null;\n\nexport type Sites = { [k: string]: { [k: string]: string } };\n\nexport type TaskLinks = gapi.client.Tasks.Schema.TaskLinks;\nexport type TaskList = gapi.client.Tasks.Schema.TaskList;\nexport type TaskLists = gapi.client.Tasks.Schema.TaskLists;\nexport type Tasks = gapi.client.Tasks.Schema.Tasks;\nexport type Task = gapi.client.Tasks.Schema.Task;\n","import { useEffect, useState } from 'react';\nimport { gapi } from 'gapi-script';\nimport { useCached, useLogin } from './utils';\n\nconst CLIENT_ID =\n  '529992368744-omh87l4imgosp83f9l67toav9rgl2bru.apps.googleusercontent.com';\nconst API_KEY = 'AIzaSyBZJJOMt3MkTKNiTgX8lRAkRx8Nd0A8lTc';\n\nconst TASKS_DISCOVERY_DOCS = [\n  'https://www.googleapis.com/discovery/v1/apis/tasks/v1/rest',\n];\nconst TASKS_SCOPE = 'https://www.googleapis.com/auth/tasks';\n\nlet called = false;\n\nfunction initClient(updateLoggedInStatus: (status: boolean) => void) {\n  if (called) return;\n  called = true;\n  gapi.client\n    .init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: TASKS_DISCOVERY_DOCS,\n      scope: TASKS_SCOPE,\n    })\n    .then(() => {\n      gapi.auth2.getAuthInstance().isSignedIn.listen(updateLoggedInStatus);\n\n      // initial sign in\n      updateLoggedInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n    })\n    .catch((err) => {\n      console.error('Auth init error: ', err);\n    });\n}\n\nexport function useGoogleAPI() {\n  const { loggedIn, setLoggedIn } = useLogin();\n  const [clientInit, setClientInit] = useState(false);\n  const [offlineAccess, setOfflineAccess] = useCached('offlineaccess', false);\n\n  useEffect(() => {\n    if (!loggedIn)\n      gapi.load('client:auth2', () => {\n        initClient((status) => {\n          setLoggedIn(status);\n          setTimeout(() => {\n            if (status && !offlineAccess)\n              gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .grantOfflineAccess({ scope: TASKS_SCOPE, prompt: 'consent' })\n                .then(({ code }) => {\n                  setOfflineAccess(true);\n                });\n          }, 5000);\n        });\n        setClientInit(true);\n      });\n  }, [loggedIn, setLoggedIn, offlineAccess, setOfflineAccess]);\n\n  const authInstance = clientInit\n    ? gapi.auth2.getAuthInstance()\n    : { signIn: () => {}, signOut: () => {} };\n\n  return {\n    loggedIn: loggedIn,\n    setLoggedIn: setLoggedIn,\n    logIn: authInstance.signIn,\n    logOut: authInstance.signOut,\n    username: loggedIn\n      ? gapi.auth2\n          .getAuthInstance()\n          .currentUser.get()\n          .getBasicProfile()\n          .getGivenName()\n      : null,\n  };\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport DayPicker from 'react-day-picker';\nimport styled from 'styled-components';\nimport { useGoogleAPI } from './auth';\nimport {\n  DEFAULT_SEARCH_URL,\n  DEFAULT_TAB_TITLE,\n  NOTE_TAB_PREFIX,\n  option,\n  SEARCH_TAB_PREFIX,\n} from './config';\nimport { getValidURL, useAddTask } from './utils';\n\nconst SearchInput = styled.input`\n  margin: 0px 2px 2px 2px;\n  padding-left: 5px;\n  box-sizing: border-box;\n\n  border: none;\n  width: var(--lwidth);\n  height: 50px;\n\n  font-size: 40px;\n  background-color: var(--frg);\n  color: var(--txt);\n  font-family: Terminus, Montserrat;\n\n  &:focus {\n    outline: none;\n  }\n\n  @media screen and (max-width: 912px) {\n    & {\n      width: var(--mwidth);\n    }\n  }\n\n  @media screen and (max-width: 608px) {\n    & {\n      width: var(--swidth);\n    }\n  }\n`;\n\nconst SearchDatePicker = styled(DayPicker)<{ open: boolean }>`\n  display: ${(props) => (props.open ? 'default' : 'none')} !important;\n`;\n\nexport default function SearchBar({\n  text,\n  setText,\n  action,\n}: {\n  text: string;\n  setText: (s: string) => void;\n  action: option<string>;\n}) {\n  const input = useRef<HTMLInputElement>(null);\n  const [pickerOpen, setPickerOpen] = useState(false);\n  const [taskText, setTaskText] = useState<option<string>>(null);\n  const { addTask } = useAddTask();\n  const { loggedIn, logOut, logIn } = useGoogleAPI();\n\n  // useEffect(() => {\n  //   // Clikcing on anything except a link will focus the search bar\n  //   (document.querySelector('body') as HTMLBodyElement).onclick = (e) => {\n  //     if (input && input.current) input.current.focus();\n  //   };\n  // }, [input]);\n\n  const updateTitle = useCallback(\n    (start: string) => {\n      if (text.length) document.title = `${start} - ${text}`;\n      else document.title = DEFAULT_TAB_TITLE;\n    },\n    [text],\n  );\n\n  useEffect(() => {\n    updateTitle(SEARCH_TAB_PREFIX);\n  }, [text, updateTitle]);\n\n  useEffect(() => {\n    const blurCallback = updateTitle.bind(null, NOTE_TAB_PREFIX),\n      focusCallback = updateTitle.bind(null, SEARCH_TAB_PREFIX);\n\n    window.addEventListener('blur', blurCallback);\n    window.addEventListener('focus', focusCallback);\n\n    return () => {\n      window.removeEventListener('blur', blurCallback);\n      window.removeEventListener('focus', focusCallback);\n    };\n  }, [updateTitle]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') setPickerOpen(false);\n    });\n  });\n\n  return (\n    <>\n      <form\n        id={'action'}\n        onSubmit={(e) => {\n          e.preventDefault();\n\n          if (/^\\/t(ask)?/.test(text)) {\n            const matches = text.match(/[\\s].*/g);\n            setTaskText(matches !== null ? matches[0].trim() : null);\n            setPickerOpen(true);\n          } else if (/^\\/login/.test(text)) {\n            if (loggedIn) return;\n            logIn();\n            setText('');\n          } else if (/^\\/logout/.test(text)) {\n            if (!loggedIn) return;\n            logOut();\n            setText('');\n            window.localStorage.clear();\n          } else {\n            window.location.assign(\n              action !== null\n                ? getValidURL(action)\n                : `${DEFAULT_SEARCH_URL}?q=${encodeURIComponent(text)}`,\n            );\n          }\n        }}\n      >\n        <SearchInput\n          type=\"text\"\n          value={text}\n          ref={input}\n          autoFocus\n          autoComplete=\"off\"\n          onChange={(e) => setText(e.target.value)}\n        />\n      </form>\n      <SearchDatePicker\n        selectedDays={new Date()}\n        open={pickerOpen}\n        onDayClick={(d) => {\n          if (taskText !== null && d) {\n            addTask({ title: taskText, due: d.toISOString() });\n            setText('');\n          }\n          setPickerOpen(false);\n        }}\n      />\n    </>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport dayjs from 'dayjs';\n\nconst Wrapper = styled.div`\n  width: 180px;\n\n  margin-right: auto;\n\n  display: flex;\n`;\n\nconst DateSpan = styled.span`\n  align-self: flex-start;\n\n  color: var(--htx);\n`;\n\nconst TimeSpan = styled(DateSpan)`\n  margin-right: auto;\n\n  align-self: flex-end;\n`;\n\nexport default function Clock() {\n  const [date, setDate] = useState(new Date());\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setDate(new Date());\n    }, 1000);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  return (\n    <>\n      <Wrapper>\n        <TimeSpan id=\"clock\">{dayjs(date).format('HH:mm:ss')}</TimeSpan>\n        <DateSpan id=\"date\">{dayjs(date).format('ddd, MMM D')}</DateSpan>\n      </Wrapper>\n    </>\n  );\n}\n","import Clock from './Clock';\nimport styled from 'styled-components';\n\nconst StaticLinksContainer = styled.div`\n  margin: 2px 2px 0 2px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  align-items: center;\n\n  padding: 0 5px;\n  width: var(--lwidth);\n\n  background-color: var(--hdr);\n\n  color: var(--txt);\n  font-size: 16px;\n  line-height: 30px;\n\n  @media screen and (max-width: 912px) {\n    & {\n      width: var(--mwidth);\n      margin: 2px auto 0 auto;\n    }\n  }\n\n  @media screen and (max-width: 608px) {\n    & {\n      width: var(--swidth);\n    }\n  }\n`;\n\nconst StaticLink = styled.a`\n  color: var(--htx);\n  text-decoration: none;\n\n  &:hover {\n    color: var(--txt);\n  }\n\n  & + & {\n    margin-left: 15px;\n  }\n\n  @media screen and (max-width: 608px) {\n    &:first-of-type {\n      margin-left: 110px;\n    }\n  }\n`;\n\nexport default function StaticLinks() {\n  const links = ['Spotify'];\n\n  return (\n    <StaticLinksContainer id=\"static-links\">\n      <Clock />\n      {links.map((link, idx) => (\n        <StaticLink key={idx} href={link.toLowerCase() + ':'}>\n          {link}\n        </StaticLink>\n      ))}\n    </StaticLinksContainer>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { option } from './config';\nimport LinkSections from './LinkSections';\nimport SearchBar from './SearchBar';\nimport StaticLinks from './StaticLinks';\nimport styled from 'styled-components';\nimport { useQueryString } from './utils';\n\nconst MainContainer = styled.div`\n  // transition: 0.2s height;\n\n  max-width: 912px;\n\n  user-select: none;\n  text-align: center;\n`;\n\nexport default function HomeSearch() {\n  const [query, setQuery] = useQueryString('q', '');\n  const [action, setAction] = useState<option<string>>(null);\n  const { height, ref } = useResizeDetector();\n\n  useEffect(() => {\n    if (\n      height !== undefined &&\n      height >\n        parseInt(\n          getComputedStyle(document.documentElement)\n            .getPropertyValue('--homesearch-height')\n            .slice(0, -2),\n        )\n    )\n      document.documentElement.style.setProperty(\n        '--homesearch-height',\n        `${height}px`,\n      );\n  }, [height]);\n\n  return (\n    <MainContainer id=\"main\" ref={ref}>\n      <StaticLinks />\n      <SearchBar text={query} setText={setQuery} action={action} />\n      <LinkSections query={query} setAction={setAction} />\n    </MainContainer>\n  );\n}\n","import { useEffect } from 'react';\nimport HomeSearch from './HomeSearch';\nimport { PAGE_HUE_MAX, PAGE_HUE_MIN } from './config';\n\nexport default function App() {\n  useEffect(() => {\n    function random(min: number, max: number) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    // Choose a random page color base on page load\n    document.documentElement.style.setProperty(\n      '--base',\n      `${random(PAGE_HUE_MIN, PAGE_HUE_MAX)}`,\n    );\n  }, []);\n\n  return (\n    <>\n      <HomeSearch />\n    </>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './style.css';\nimport './daypicker.css';\nimport { unregister } from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\nunregister();\n"],"sourceRoot":""}